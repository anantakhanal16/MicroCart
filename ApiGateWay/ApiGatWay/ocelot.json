// Ocelot API Gateway Configuration
// --------------------------------
// Used to route incoming API requests (from client/frontend) to internal microservices.

// ðŸ”‘ Property Explanations:
// -------------------------
// - UpstreamPathTemplate: Path the client calls, e.g. "/api/customer".
// - UpstreamHttpMethod: HTTP methods allowed on this route (e.g., GET, POST, PUT).
// - DownstreamPathTemplate: Actual path in the internal microservice.
// - DownstreamScheme: Protocol used for downstream call ("http" or "https").
// - DownstreamHostAndPorts:
//     â€¢ Host: Hostname or Docker container name of the target service.
//     â€¢ Port: Port where the microservice is listening.

// âœ… Full Example Walkthrough:
// ----------------------------
// Route Block:
// {
//     "DownstreamPathTemplate": "/api/customer",
//     "DownstreamScheme": "http",
//     "DownstreamHostAndPorts": [
//         {
//             "Host": "customerwebapi",
//             "Port": 80
//         }
//     ],
//     "UpstreamPathTemplate": "/api/customer",
//     "UpstreamHttpMethod": [ "GET", "POST" ]
// }
//
// ðŸ”„ Client Request (Upstream):
// Client (e.g., frontend or Postman) sends: 
//   â†’ GET http://localhost:8085/api/customer
//
// ðŸ”½ Ocelot forwards request (Downstream):
//   â†’ GET http://customerwebapi:80/api/customer
// Where:
// - "localhost:8085" is the API Gateway (Ocelot)
// - "customerwebapi:80" is the internal microservice

{
    "Routes": [
        {
            "UpstreamPathTemplate": "/api/Account/{everything}",
            "UpstreamHttpMethod": [ "POST", "GET", "PUT", "DELETE" ],
            "DownstreamScheme": "http",
            "DownstreamHostAndPorts": [
                {
                    "Host": "authapi",
                    "Port": 80
                }
            ],
            "DownstreamPathTemplate": "/api/Account/{everything}"
        },
        {
            "DownstreamPathTemplate": "/api/customer",
            "DownstreamScheme": "http",
            "DownstreamHostAndPorts": [
                {
                    "Host": "customerwebapi",
                    "Port": 80
                }
            ],
            "UpstreamPathTemplate": "/api/customer",
            "UpstreamHttpMethod": [ "GET", "POST" ]
        },
        {
            "DownstreamPathTemplate": "/api/customer/{id}",
            "DownstreamScheme": "http",
            "DownstreamHostAndPorts": [
                {
                    "Host": "customerwebapi",
                    "Port": 80
                }
            ],
            "UpstreamPathTemplate": "/api/customer/{id}",
            "UpstreamHttpMethod": [ "GET", "PUT", "DELETE" ]
        },
        {
            "DownstreamPathTemplate": "/api/customer/create-order",
            "DownstreamScheme": "http",
            "DownstreamHostAndPorts": [
                {
                    "Host": "customerwebapi",
                    "Port": 80
                }
            ],
            "UpstreamPathTemplate": "/api/customer/create-order",
            "UpstreamHttpMethod": [ "POST" ]
        },
        {
            "DownstreamPathTemplate": "/api/products",
            "DownstreamScheme": "http",
            "DownstreamHostAndPorts": [
                {
                    "Host": "productapi",
                    "Port": 80
                }
            ],
            "UpstreamPathTemplate": "/api/products",
            "UpstreamHttpMethod": [ "GET", "POST" ]
        },
        {
            "DownstreamPathTemplate": "/api/products/{id}",
            "DownstreamScheme": "http",
            "DownstreamHostAndPorts": [
                {
                    "Host": "productapi",
                    "Port": 80
                }
            ],
            "UpstreamPathTemplate": "/api/products/{id}",
            "UpstreamHttpMethod": [ "GET", "PUT", "DELETE" ]
        },
        {
            "DownstreamPathTemplate": "/api/order",
            "DownstreamScheme": "http",
            "DownstreamHostAndPorts": [
                {
                    "Host": "orderapi",
                    "Port": 80
                }
            ],
            "UpstreamPathTemplate": "/api/order",
            "UpstreamHttpMethod": [ "GET", "POST" ]
        },
        {
            "DownstreamPathTemplate": "/api/order/{id}",
            "DownstreamScheme": "http",
            "DownstreamHostAndPorts": [
                {
                    "Host": "orderapi",
                    "Port": 80
                }
            ],
            "UpstreamPathTemplate": "/api/order/{id}",
            "UpstreamHttpMethod": [ "GET", "PUT", "DELETE" ]
        }
    ],
    "GlobalConfiguration": {
        "BaseUrl": "http://localhost:8085"
    }
}
